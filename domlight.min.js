/*! domlight - v0.1.1 - MIT License - https://github.com/h2non/domlight */
(function(e,t){if(typeof define==="function"&&define.amd){define(["exports"],t)}else if(typeof exports==="object"){t(exports);if(typeof module==="object"&&module!==null){module.exports=exports=exports.Domlight}}else{t(e)}})(this,function(e){"use strict";var t="0.1.1";var n="focusable-overlay";var o=Array.prototype.slice;var r=Object.prototype.hasOwnProperty;var i={fadeDuration:700,hideOnClick:false,hideOnESC:true,findOnResize:true,context:null};var l=[];var c=null;var u=null;var a=false;var d=false;var f=document;var s="#"+n+" .column";function p(e,t){t=V(V({},i),t);if(e&&e.length){if(t.context){var n=document.querySelector(t.context);var o=false;for(var r=0;r<e.length;r++){if(m(e[r],n)){e=e[r];o=true}}if(!o){throw new TypeError("Element is not contained in the provided context.")}}else{e=e[0]}}else if(!(e instanceof HTMLElement)){throw new TypeError("First argument should be a Node or jQuery/Zepto selector")}x(e,t);return{element:e,options:t,isVisible:y,hide:function(){S(e)}}}function m(e,t){while((e=e.parentNode)&&e!==t);return!!e}function y(){return d}function v(e){var t=document.createElement("div");t.id=n;var o=document.body;if(e.context){o=document.querySelector(e.context)}o.insertBefore(t,o.firstChild);u=t;a=true;h(e);A(e)}function h(e){if(e.hideOnESC){window.addEventListener("keyup",g)}if(e.hideOnClick){u.addEventListener("click",E)}}function g(e){if(e.keyCode===27&&d){E();window.removeEventListener("keyup",g)}}function b(e,t){document.onreadystatechange=function(){if(document.readyState==="complete"){f=document.body;e.apply(null,t)}}}function x(e,t){if(document.readyState!=="complete"){return b(x,arguments)}else if(f==null){f=document.body}if(a===false){v(t)}w(e,t)}function w(e,t){var n=window.getComputedStyle(e);var o=n.getPropertyValue("position");var r=n.getPropertyValue("z-index");l.push({zIndex:r,position:o,element:e});if(t.context){document.querySelector(t.context).style.overflow="hidden"}else{document.body.style.overflow="hidden"}if(o==="static"){e.style.position="relative"}if((+r||1)<1e4){e.style.zIndex=1e4}if(d===false){q(e,t.context)}u.style.display="block";setTimeout(function(){u.style.opacity="1"},50)}function S(e){var t=C(e);if(t){k(l[t]);l.splice(t,1)}if(l.length){z();q(l[0].element);if(document.querySelector("#"+n)&&document.querySelector("#"+n).parentNode){document.querySelector("#"+n).parentNode.removeChild(document.querySelector("#"+n));a=false}}else{E()}}function C(e){var t=-1;for(var n=0,o=l.length;n<o;n+=1){if(l[n].element===e){t=n;break}}return t}function E(){console.log("hide elements");d=false;document.body.style.overflow="";u.style.display="none";z();l.splice(0).forEach(k);if(document.querySelector("#"+n)&&document.querySelector("#"+n).parentNode){document.querySelector("#"+n).parentNode.removeChild(document.querySelector("#"+n));a=false}}function k(e){e.element.style.zIndex=e.zIndex;e.element.style.position=e.position}function q(e,t){var n=0;d=true;z();while(n<4){N(e,n,t);n+=1}}function N(e,t,n){var o=0,r=0,i=R(e.clientWidth),l=0,c=0,a="100%";var d=e.getBoundingClientRect();if(n){var f=document.querySelector(n).getBoundingClientRect();l=f.top;c=f.left}switch(t){case 0:i=R(d.left-c);break;case 1:r=R(d.left-c);a=R(d.top-l);break;case 2:r=R(d.left-c);o=R(e.clientHeight+d.top-l);break;case 3:i="100%";r=R(e.clientWidth+d.left-c);break}var s="top:"+o+";left:"+r+";width:"+i+";height:"+a;var p=O(s);u.appendChild(p)}function O(e){var t=document.createElement("div");t.className="column";t.setAttribute("style",e);return t}function z(){var e=u.querySelectorAll("#"+n+" .column");for(var t=0,o=e.length;t<o;t+=1){e[t].parentNode.removeChild(e[t])}}function R(e){return e+"px"}function A(e){var t=I();t.insertRule("#"+n+"{"+ +"display:none;"+"opacity:0;"+"transition: opacity "+e.fadeDuration+"ms;"+"position: absolute;"+"top: 0;"+"left: 0;"+"width: 100%;"+"height: 100%;"+"z-index: 9999;"+"overflow: hidden;"+"pointer-events: none;"+"}",0);t.insertRule("#"+n+" .column"+"{"+"position: absolute;"+"background: rgba(0,0,0,0.8);"+"pointer-events: all;"+"}",1)}function I(){var e=document.createElement("style");e.appendChild(document.createTextNode(""));document.head.appendChild(e);return e.sheet}function T(){return l.map(function(e){return e.element})}function V(e,t){for(var n in t)if(r.call(t,n)){e[n]=t[n]}return e}e.Domlight=p;p.defaults=i;p.hideAll=E;p.isVisible=y;p.getActiveElements=T;p.VERSION=t});
//# sourceMappingURL=http://cdn.rawgit.com/zzarcon/focusable/0.1.1/domlight.min.js.map